<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Form view inherit -->
    <record id="view_move_form_inherit"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.account.view.move.form.inherit</field>
        <field name="inherit_id"
               ref="account.view_move_form"
        />
        <field name="model">account.move</field>
        <field name="priority">36</field>
        <field name="arch"
               type="xml"
        >
            <!-- HU fields -->
            <xpath expr="//page[@name='aml_tab']"
                   position="after"
            >
                <page name="l10n_hu"
                      string="HU"
                >
                    <group name="l10n_hu">
                        <group name="l10n_hu_1">
                            <!-- Currency -->
                            <field name="l10n_hu_foreign_currency"
                                   string="Foreign Currency"
                            />
                            <field name="l10n_hu_company_currency"
                                   invisible="1"
                            />
                            <field name="l10n_hu_currency_name"
                                   string="Currency Code"
                            />
                            <field name="l10n_hu_currency_date"
                                   string="Rate Date"
                            />
                            <field name="l10n_hu_currency_rate"
                                   string="Accounting Rate"
                            />
                            <label name="l10n_hu_document_rate"
                                   for="l10n_hu_document_rate"
                                   string="Document Rate"
                            />
                            <div name="l10_hu_document_rate">
                                <field name="l10n_hu_document_rate"
                                       class="oe_inline"
                                />
                                <button name="action_l10n_hu_wizard_currency_exchange"
                                        class="oe_inline btn-sm btn-link"
                                        icon="fa-calculator"
                                        string="Currency Exchange"
                                        type="object"
                                />
                            </div>
                            <field name="l10n_hu_rate_difference"
                                   string="Rate Difference"
                            />
                            <!-- Payment -->
                            <field name="l10n_hu_invoice_payment_method"
                                   string="Payment Method"
                            />
                        </group>
                        <group name="l10n_hu_2">
                            <!-- Document -->
                            <field name="l10n_hu_document_type"
                                   options="{'no_create': True,}"
                            />
                            <field name="l10n_hu_document_type_code"/>
                            <!-- VAT -->
                            <field name="l10n_hu_vat_date"
                                   string="VAT Date"
                            />
                            <!-- Original -->
                            <field name="l10n_hu_original_account_move"
                                   options="{'no_create': True,}"
                                   string="Original Account Move"
                            />
                            <field name="l10n_hu_original_invoice_number"
                                   string="Original Invoice Number"
                            />
                        </group>
                        <group name="l10n_hu_3"
                               string="Partner"
                        >
                            <!-- Partner -->
                            <field name="l10n_hu_fiscal_representative"
                                   options="{'no_create': True,}"
                            />
                            <field name="l10n_hu_fiscal_representative_bank_account"
                                   domain="[('partner_id', '=', l10n_hu_fiscal_representative)]"
                                   options="{'no_create': True,}"
                            />
                            <field name="l10n_hu_company_partner"/>
                            <field name="l10n_hu_partner_country"/>

                        </group>
                        <group name="l10n_hu_4"
                               string="Period"
                        >
                            <!-- Period -->
                            <field name="l10n_hu_invoice_delivery_period_start"
                                   string="Period Start"
                            />
                            <field name="l10n_hu_invoice_delivery_period_end"
                                   string="Period End"
                            />
                            <field name="l10n_hu_invoice_periodical_delivery"
                                   string="Periodical Delivery"
                            />
                            <field name="l10n_hu_invoice_delivery_period_summary"
                                   string="Period Summary"
                            />
                        </group>
                        <group name="l10n_hu_5"
                               string="OSS"
                        >
                            <!-- OSS -->
                            <label name="l10n_hu_oss_label"
                                   for="l10n_hu_eu_oss_eligible"
                                   string="EU OSS"
                            />
                            <div name="l10n_hu_eu_oss_div">
                                <div name="l10n_hu_eu_oss_eligible">
                                    <field name="l10n_hu_eu_oss_eligible"
                                           class="mr-1"
                                           force_save="1"
                                           readonly="1"
                                    />
                                    <span>Eligible</span>
                                </div>
                                <div name="l10n_hu_eu_oss_enabled"
                                     attrs="{
                                         'invisible': [
                                             ('l10n_hu_eu_oss_eligible', '=', False),
                                         ],
                                     }"
                                >
                                    <field name="l10n_hu_eu_oss_enabled"
                                           class="mr-1"
                                           attrs="{
                                               'readonly': [
                                                   ('state', '!=', 'draft'),
                                               ],
                                           }"
                                    />
                                    <span>Enabled</span>
                                </div>
                                <button name="action_l10n_hu_update_eu_oss"
                                        attrs="{'invisible': [
                                            '|',
                                            ('id', '=', False),
                                            ('state', '!=', 'draft'),
                                        ]}"
                                        class="btn-link btn-block pull-start"
                                        icon="fa-refresh"
                                        string="Refresh"
                                        type="object"
                                />
                            </div>
                        </group>
                        <group name="l10n_hu_6"
                               string="Journal"
                        >
                            <!-- Journal -->
                            <field name="l10n_hu_journal_show_print_pdf"/>
                            <field name="l10n_hu_journal_technical_type"/>
                            <field name="l10n_hu_journal_type"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
    <!-- List view inherit  -->
    <record id="view_invoice_tree_inherit"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.account.view.invoice.tree.inherit</field>
        <field name="inherit_id"
               ref="account.view_invoice_tree"
        />
        <field name="model">account.move</field>
        <field name="priority">36</field>
        <field name="arch"
               type="xml"
        >
            <!-- HU fields -->
            <xpath expr="//field[@name='date']"
                   position="before"
            >
                <field name="l10n_hu_partner_country"
                       optional="hide"
                />
                <field name="l10n_hu_trade_position"
                       optional="hide"
                       string="Trade Position"
                />
            </xpath>
            <!-- HU fields -->
            <xpath expr="//field[@name='date']"
                   position="after"
            >
                <field name="l10n_hu_vat_date"
                       optional="hide"
                       string="HU VAT Date"
                />
            </xpath>
        </field>
    </record>
    <!-- Search view inherit  -->
    <record id="view_account_invoice_filter_inherit"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.account.view.account.invoice.filter.inherit</field>
        <field name="inherit_id"
               ref="account.view_account_invoice_filter"
        />
        <field name="model">account.move</field>
        <field name="priority">36</field>
        <field name="arch"
               type="xml"
        >
           <!-- Filter -->
            <xpath expr="//filter[@name='due_date']"
                   position="after"
            >
                <separator/>
                <filter name="l10n_hu_vat_date_filter"
                        date="l10n_hu_vat_date"
                        string="HU VAT Date"
                />
                <separator/>
                <filter name="l10n_hu_trade_position_domestic_filter"
                        domain="[('l10n_hu_trade_position', '=', 'domestic')]"
                        string="Domestic"
                />
                <filter name="l10n_hu_trade_position_eu_filter"
                        domain="[('l10n_hu_trade_position', '=', 'eu')]"
                        string="EU"
                />
                <filter name="l10n_hu_trade_position_other_filter"
                        domain="[('l10n_hu_trade_position', '=', 'other')]"
                        string="Other"
                />
                <filter name="l10n_hu_trade_position_none_filter"
                        domain="[('l10n_hu_trade_position', '=', False)]"
                        string="No Trade Position"
                />
            </xpath>
            <!-- Filter group by -->
            <xpath expr="//filter[@name='group_by_sequence_prefix']"
                   position="after"
            >
                <separator/>
                <filter name="l10n_hu_vat_date_filter_group_by"
                        context="{'group_by': 'l10n_hu_vat_date'}"
                        string="HU VAT Date"
                />
                <filter name="l10n_hu_partner_country_filter_group_by"
                        context="{'group_by': 'l10n_hu_partner_country'}"
                        string="Partner Country"
                />
                <filter name="l10n_hu_trade_position_filter_group_by"
                        context="{'group_by': 'l10n_hu_trade_position'}"
                        string="Trade Position"
                />
                <filter name="partner_id_filter_group_by"
                        context="{'group_by': 'partner_id'}"
                        string="Partner"
                />
            </xpath>
        </field>
    </record>
</odoo>
